<article class="product-card" [class.product-card--loading]="!product" (click)="onProductClick()" role="button" tabindex="0">
  <!-- Loading skeleton -->
  <div *ngIf="!product" class="product-card__skeleton">
    <div class="skeleton product-card__skeleton-image"></div>
    <div class="product-card__skeleton-content">
      <div class="skeleton product-card__skeleton-title"></div>
      <div class="skeleton product-card__skeleton-price"></div>
    </div>
  </div>

  <!-- Product content -->
  <div *ngIf="product" class="product-card__content">
    <!-- Product image -->
    <div class="product-card__image-wrapper">
      <img 
        [src]="product.image" 
        [alt]="product.title"
        class="product-card__image"
        loading="lazy"
        (error)="onImageError($event)">
      
      <!-- Add to cart button -->
      <button 
        class="product-card__add-btn" 
        [attr.aria-label]="'Add ' + product.title + ' to cart'"
        (click)="onAddToCart($event)">
        <svg class="product-card__add-icon" width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg">
          <path d="M1 1H4L6.68 12.39C6.77144 12.8504 7.02191 13.264 7.38755 13.5583C7.75318 13.8526 8.2107 14.009 8.68 14H16.4C16.8693 14.009 17.3268 13.8526 17.6925 13.5583C18.0581 13.264 18.3086 12.8504 18.4 12.39L19.8 5H5M8 19C8 19.5523 7.55228 20 7 20C6.44772 20 6 19.5523 6 19C6 18.4477 6.44772 18 7 18C7.55228 18 8 18.4477 8 19ZM18 19C18 19.5523 17.5523 20 17 20C16.4477 20 16 19.5523 16 19C16 18.4477 16.4477 18 17 18C17.5523 18 18 18.4477 18 19Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
        </svg>
      </button>
    </div>

    <!-- Product details -->
    <div class="product-card__details">
      <h3 class="product-card__title">{{ product.title }}</h3>
      <div class="product-card__footer">
        <span class="product-card__price">${{ product.price.toFixed(2) }}</span>
      </div>
    </div>
  </div>
</article>